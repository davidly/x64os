# x64os
Run AMD64 Linux elf binaries on Windows, Linux, MacOS on arbitrary ISAs.

The x64os emulator runs binaries built for an AMD64 Linux machine on other machines. 

Only a subset of the Linux syscalls are implemented including memory allocation and file I/O.

AMD64 emulation is limited to real-mode 64-bit long mode only. Integer, x87, and SSE2 instructions
are partially implemented. Other vector extensions including MMX and AVX are not implemented. The
only instructions implemented are those used by glibc and those generated by the gcc, clang, Rust,
and gfortran compilers at various optimization levels for the test cases that are part of this repo.

Files:

  * x64os.cxx + linuxem.h: Main app that loads ELF binaries and provides basic Linux syscall emulation
  * x64.cxx + x64.hxx: AMD64 emulation
  * *.hxx: support functionality

Test folders:

  * c_tests: a variety of assembly and C test cases with scripts to build with gcc and clang at optimization levels 0, 1, 2, 3, and fast
  * f_tests: a varity of GNU Fortran test cases and scripts to build them
  * rust_tests: a varity of Rust test cases with scripts to build at optimization levels 0, 1, 2, and 3.  

In addition to the test cases above, all of the test cases were run in x64os built for Sparc v8, 68000,
Arm64, and RISC-V64 in emulators for each of those ISAs. Those can be found in sister repos sparcos, m68,
armos, and rvos. x64os was also tested recursively by running itself running each test case.

Also, each of the emulators mentioned above were built for AMD64 and run nested in x64os with all of their
respective test cases for validation.

Next steps:

   * Generate test cases that use instructions not yet implemented x64os can be more complete.
   * Performance pass. x64os runs test binaries about 2x slower than other emulators mentioned above run equivalent binaries.
